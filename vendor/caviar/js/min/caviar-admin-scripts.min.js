jQuery(document).ready(function(e){function a(){e(".wp-color-picker").each(function(){e(this).wpColorPicker({defaultColor:!1,change:function(){},clear:function(){},hide:!0,palettes:["#ffffff","#000000","#ff7c0b","#ff1616"]})})}function t(){e(document).on("click",".uploadSingleImage",function(e){e.preventDefault();var a=jQuery(this).data("target"),t=jQuery(this).data("size");if(i)return i.open(),void 0;var i=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1}).on("select",function(){var e=i.state().get("selection").first().toJSON();jQuery("#"+a).val(e.id);var l="img#image-"+a,r=".image-url#imageUrl-"+a;switch(t){case"icon":case"small":var s=e.sizes.thumbnail.url;break;case"medium":var s=e.url;break;case"large":var s=e.sizes.full.url}jQuery(l).attr("src",s),jQuery(r).attr("value",s)}).open()}),e(document).on("change",".image-url",function(a){a.preventDefault();var t=jQuery(this).attr("data-target"),i=(jQuery(".thumb-preview").data("placeimg"),"img#image-"+t);jQuery(i).attr("src",e(this).val())})}function i(){e(document).on("click",".clearSingleImage",function(e){e.preventDefault();var a=jQuery(this).attr("data-target"),t=jQuery(".thumb-preview").data("placeimg"),i="img#image-"+a,l=".image-url#imageUrl-"+a;confirmed=confirm("Are you sure want to remove the image?"),confirmed&&(jQuery(i).attr("src",t),jQuery(l).attr("value",""))})}function l(a){var t=new Array,i=0;return e.each(a,function(e,a){t[i]="<option value='"+e+"'>"+a+"</option>",++i}),t.join(" ")}function r(a,t){var i=new Array,l=0;return e.each(t,function(e,t){i[l]="<input class='repeatedField' id='"+e+"' type='radio' name='"+a+"' value='"+e+"'/> <label class='radio-label' for='"+e+"'>"+t+"</label>",++l}),i.join(" ")}function s(a,t){var i=new Array,l=0;return e.each(t,function(e,t){i[l]="<div class='checkable-element clearfix radio-pills'> <label class='tab-label'> <input id='"+e+"' type='radio'  name='"+a+"' value='"+e+"'> <div class='checkable-item'>"+t+"</div> </label>",i[l]="<input class='repeatedField' id='"+e+"' type='radio' name='"+a+"' value='"+e+"'/> <label class='radio-label' for='"+e+"'>"+t+"</label>",++l}),i.join(" ")}function n(a,t){var i=new Array,l=0;return e.each(t,function(e,t){i[l]="<div class='checkable-element clearfix radio-pills'> <label class='tab-label'> <input id='"+e+"' type='radio'  name='"+a+"' value='"+e+"'> <div class='selected-element'> <img class='image-selected "+e+"' src='"+t+"' alt='"+t+"' id='"+t+"'/> </div> </label>",++l}),i.join(" ")}function c(a,t){var i=new Array,l=0;return e.each(t,function(e,t){i[l]="<input class='repeatedField' id='"+e+"' type='checkbox' name='"+a+"[]' value='"+e+"'/> <label class='radio-label' for='"+e+"'>"+t+"</label>",++l}),i.join(" ")}function o(){e(".repeater-field").each(function(){var a=jQuery(this).data("name"),t=jQuery(this).data("id"),i=parseInt(jQuery(this).data("fields-count"))-1,o=jQuery(this).data("fields");jQuery(document).on("click",".addField-"+t,function(d){d.preventDefault();var u=new Array,p=0;e.each(o,function(e,t){switch(t.type){case"text":u[p]="<div class='widget-separator'><span class='control-label'>"+t.title+"</span> <input type='text' name='"+a+"["+(i+1)+"]["+e+"]' value='' class='widefat repeatedField'></div>";break;case"textarea":u[p]="<div class='widget-separator'><span class='control-label'>"+t.title+"</span> <textarea name='"+a+"["+(i+1)+"]["+e+"]' class='widefat repeatedField' rows='5' cols='30'></textarea></div>";break;case"select":u[p]="<div class='widget-separator'> <span class='control-label'>"+t.title+"</span> <select class='widefat repeatedField' name='"+a+"["+(i+1)+"]["+e+"]'>"+l(t.options);break;case"radio":u[p]="<div class='widget-separator'> <span class='control-label'>"+t.title+"</span> <div class='radio-wrapper widefat'>"+r(a+"["+(i+1)+"]["+e+"]",t.options);break;case"radiopill":u[p]="<div class='widget-separator'> <span class='control-label'>"+t.title+"</span> <div class='radio-tabs radio-only'> "+s(a+"["+(i+1)+"]["+e+"]",t.options);break;case"radioimage":u[p]="<div class='widget-separator'> <span class='control-label'>"+t.title+"</span> <div class='radio-tabs radio-images radio-only'> "+n(a+"["+(i+1)+"]["+e+"]",t.options);break;case"checkbox":u[p]="<div class='widget-separator'> <span class='control-label'>"+t.title+"</span> <div class='checkbox-wrapper widefat'>"+c(a+"["+(i+1)+"]["+e+"]",t.options);break;case"upload":u[p]="<div class='widget-separator'><span class='control-label'>"+t.title+"</span> <div id='"+(i+1)+"' class='uploadImage upload-controls widefat'> <div class='upload-wrapper'> <figure class='upload-preview column'> <section class='upload-button-group clearfix'><a class='button uploadSingleImage upImage-"+(i+1)+" u-pull-left' href='#' title='Upload' data-target='"+(i+1)+"' data-size='medium'><i class='fa fa-cloud-upload pr-small'></i> Upload</a><a class='button clearSingleImage "+(i+1)+" u-pull-left' href='#' title='Remove' data-target='"+(i+1)+"'><i class='fa fa-eraser pr-small'></i> Remove</a> </section> <img id='image-"+(i+1)+"' class='thumb-preview' src='' alt='thumby'> </figure> <div class='column'> <input type='url' class='value-hidden image-url widefat mb-small repeatedField' id='imageUrl-"+(i+1)+"' name='"+a+"["+(i+1)+"]["+e+"]' value='' data-target='"+(i+1)+"'> </div> </div> </div></div>"}++p}),e(".dynamicAccordion-"+t).append('<div class="repeatingSection repeater_wrapper"> <label class="repeater-title control-label widefat" id="itemFeatures" for="itemFeatures">New Field </label> <div class="accordion-content"> '+u.join(" ")+' </div> <input type="hidden" class="widefat repeaterOrder" value="'+parseInt(i+1)+'"/></div> <a href="#" class="button button-secondary button-large deleteField">Delete</a>').accordion("refresh"),i++})})}function d(){e(".repeater-field").accordion({header:"> .repeatingSection > .repeater-title",active:!1,collapsible:!0,autoHeight:!1}).sortable({axis:"y",handle:".repeater-title",placeholder:"ui-state-highlight",start:function(a,t){e(this).attr("data-previndex",t.item.index())},stop:function(a,t){t.item.children(".repeater-title").triggerHandler("focusout"),e(this).accordion("refresh")},update:function(a,t){t.item.index(),e(this).attr("data-previndex");e(this).removeAttr("data-previndex"),e(".repeatingSection").each(function(a){e(this).find(".repeaterOrder").val(a)})}})}jQuery(document).on("click",".deleteField",function(){return e(this).parent().parent("div").remove(),!1}),a(),t(),i(),d(),o()});